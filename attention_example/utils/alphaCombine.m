function [newImg, colorMapCam] = alphaCombine(img1, resizeCam, alpha)
    % Extract RGB components from the first image
    [R1, G1, B1] = getRGB(img1);
    
    % Apply colormap to the resized camera image
    colorMapCam = applyColormap(resizeCam);
    
    % Extract RGB components from the color-mapped image
    [R2, G2, B2] = getRGB(colorMapCam);
    
    % Initialize a new image with the same size as img1
    newImg = zeros(size(img1));
    
    % Combine the RGB channels using the alpha blending formula
    newImg(:, :, 1) = alpha .* R1 + (1 - alpha) .* R2; % Red channel
    newImg(:, :, 2) = alpha .* G1 + (1 - alpha) .* G2; % Green channel
    newImg(:, :, 3) = alpha .* B1 + (1 - alpha) .* B2; % Blue channel
end

function [R,G,B]=getRGB(img)
    if size(img,3) == 1
        img = cat(3, img, img, img);
    end
    R=img(:,:,1);
    G=img(:,:,2);
    B=img(:,:,3);
    if max(img(:))>1
        R = double(R)./255;
        G = double(G)./255;
        B = double(B)./255;
    end
end

function [img] = applyColormap(resizeCam)
    [m,n]=size(resizeCam);
    resizeCam = (resizeCam - min(min(resizeCam))) / (max(max(resizeCam)) - min(min(resizeCam)));
%     mycolorMap=colormap('Turbo');
    mycolorMap=[0,0,1;0.00392156862745098,0.00392156862745098,0.996339869281046;0.00784313725490196,0.00784313725490196,0.992679738562092;0.0117647058823529,0.0117647058823529,0.989019607843137;0.0156862745098039,0.0156862745098039,0.985359477124183;0.0196078431372549,0.0196078431372549,0.981699346405229;0.0235294117647059,0.0235294117647059,0.978039215686275;0.0274509803921569,0.0274509803921569,0.974379084967320;0.0313725490196078,0.0313725490196078,0.970718954248366;0.0352941176470588,0.0352941176470588,0.967058823529412;0.0392156862745098,0.0392156862745098,0.963398692810458;0.0431372549019608,0.0431372549019608,0.959738562091503;0.0470588235294118,0.0470588235294118,0.956078431372549;0.0509803921568627,0.0509803921568627,0.952418300653595;0.0549019607843137,0.0549019607843137,0.948758169934641;0.0588235294117647,0.0588235294117647,0.945098039215686;0.0627450980392157,0.0627450980392157,0.941437908496732;0.0666666666666667,0.0666666666666667,0.937777777777778;0.0705882352941177,0.0705882352941177,0.934117647058824;0.0745098039215686,0.0745098039215686,0.930457516339869;0.0784313725490196,0.0784313725490196,0.926797385620915;0.0823529411764706,0.0823529411764706,0.923137254901961;0.0862745098039216,0.0862745098039216,0.919477124183007;0.0901960784313726,0.0901960784313726,0.915816993464052;0.0941176470588235,0.0941176470588235,0.912156862745098;0.0980392156862745,0.0980392156862745,0.908496732026144;0.101960784313725,0.101960784313725,0.904836601307190;0.105882352941176,0.105882352941176,0.901176470588235;0.109803921568627,0.109803921568627,0.897516339869281;0.113725490196078,0.113725490196078,0.893856209150327;0.117647058823529,0.117647058823529,0.890196078431373;0.121568627450980,0.121568627450980,0.886535947712418;0.125490196078431,0.125490196078431,0.882875816993464;0.129411764705882,0.129411764705882,0.879215686274510;0.133333333333333,0.133333333333333,0.875555555555556;0.137254901960784,0.137254901960784,0.871895424836601;0.141176470588235,0.141176470588235,0.868235294117647;0.145098039215686,0.145098039215686,0.864575163398693;0.149019607843137,0.149019607843137,0.860915032679739;0.152941176470588,0.152941176470588,0.857254901960784;0.156862745098039,0.156862745098039,0.853594771241830;0.160784313725490,0.160784313725490,0.849934640522876;0.164705882352941,0.164705882352941,0.846274509803922;0.168627450980392,0.168627450980392,0.842614379084967;0.172549019607843,0.172549019607843,0.838954248366013;0.176470588235294,0.176470588235294,0.835294117647059;0.180392156862745,0.180392156862745,0.831633986928105;0.184313725490196,0.184313725490196,0.827973856209150;0.188235294117647,0.188235294117647,0.824313725490196;0.192156862745098,0.192156862745098,0.820653594771242;0.196078431372549,0.196078431372549,0.816993464052288;0.200000000000000,0.200000000000000,0.813333333333333;0.203921568627451,0.203921568627451,0.809673202614379;0.207843137254902,0.207843137254902,0.806013071895425;0.211764705882353,0.211764705882353,0.802352941176471;0.215686274509804,0.215686274509804,0.798692810457516;0.219607843137255,0.219607843137255,0.795032679738562;0.223529411764706,0.223529411764706,0.791372549019608;0.227450980392157,0.227450980392157,0.787712418300654;0.231372549019608,0.231372549019608,0.784052287581699;0.235294117647059,0.235294117647059,0.780392156862745;0.239215686274510,0.239215686274510,0.776732026143791;0.243137254901961,0.243137254901961,0.773071895424837;0.247058823529412,0.247058823529412,0.769411764705882;0.250980392156863,0.250980392156863,0.765751633986928;0.254901960784314,0.254901960784314,0.762091503267974;0.258823529411765,0.258823529411765,0.758431372549020;0.262745098039216,0.262745098039216,0.754771241830065;0.266666666666667,0.266666666666667,0.751111111111111;0.270588235294118,0.270588235294118,0.747450980392157;0.274509803921569,0.274509803921569,0.743790849673203;0.278431372549020,0.278431372549020,0.740130718954248;0.282352941176471,0.282352941176471,0.736470588235294;0.286274509803922,0.286274509803922,0.732810457516340;0.290196078431373,0.290196078431373,0.729150326797386;0.294117647058824,0.294117647058824,0.725490196078431;0.298039215686275,0.298039215686275,0.721830065359477;0.301960784313725,0.301960784313725,0.718169934640523;0.305882352941177,0.305882352941177,0.714509803921569;0.309803921568627,0.309803921568627,0.710849673202614;0.313725490196078,0.313725490196078,0.707189542483660;0.317647058823529,0.317647058823529,0.703529411764706;0.321568627450980,0.321568627450980,0.699869281045752;0.325490196078431,0.325490196078431,0.696209150326797;0.329411764705882,0.329411764705882,0.692549019607843;0.333333333333333,0.333333333333333,0.688888888888889;0.337254901960784,0.337254901960784,0.685228758169935;0.341176470588235,0.341176470588235,0.681568627450981;0.345098039215686,0.345098039215686,0.677908496732026;0.349019607843137,0.349019607843137,0.674248366013072;0.352941176470588,0.352941176470588,0.670588235294118;0.356862745098039,0.356862745098039,0.666928104575163;0.360784313725490,0.360784313725490,0.663267973856209;0.364705882352941,0.364705882352941,0.659607843137255;0.368627450980392,0.368627450980392,0.655947712418301;0.372549019607843,0.372549019607843,0.652287581699346;0.376470588235294,0.376470588235294,0.648627450980392;0.380392156862745,0.380392156862745,0.644967320261438;0.384313725490196,0.384313725490196,0.641307189542484;0.388235294117647,0.388235294117647,0.637647058823530;0.392156862745098,0.392156862745098,0.633986928104575;0.396078431372549,0.396078431372549,0.630326797385621;0.400000000000000,0.400000000000000,0.626666666666667;0.403921568627451,0.403921568627451,0.623006535947712;0.407843137254902,0.407843137254902,0.619346405228758;0.411764705882353,0.411764705882353,0.615686274509804;0.415686274509804,0.415686274509804,0.612026143790850;0.419607843137255,0.419607843137255,0.608366013071895;0.423529411764706,0.423529411764706,0.604705882352941;0.427450980392157,0.427450980392157,0.601045751633987;0.431372549019608,0.431372549019608,0.597385620915033;0.435294117647059,0.435294117647059,0.593725490196079;0.439215686274510,0.439215686274510,0.590065359477124;0.443137254901961,0.443137254901961,0.586405228758170;0.447058823529412,0.447058823529412,0.582745098039216;0.450980392156863,0.450980392156863,0.579084967320261;0.454901960784314,0.454901960784314,0.575424836601307;0.458823529411765,0.458823529411765,0.571764705882353;0.462745098039216,0.462745098039216,0.568104575163399;0.466666666666667,0.466666666666667,0.564444444444444;0.470588235294118,0.470588235294118,0.560784313725490;0.474509803921569,0.474509803921569,0.557124183006536;0.478431372549020,0.478431372549020,0.553464052287582;0.482352941176471,0.482352941176471,0.549803921568628;0.486274509803922,0.486274509803922,0.546143790849673;0.490196078431373,0.490196078431373,0.542483660130719;0.494117647058824,0.494117647058824,0.538823529411765;0.498039215686275,0.498039215686275,0.535163398692810;0.501960784313726,0.501960784313726,0.531503267973856;0.505882352941176,0.505882352941176,0.527843137254902;0.509803921568627,0.509803921568627,0.524183006535948;0.513725490196078,0.513725490196078,0.520522875816994;0.517647058823530,0.517647058823530,0.516862745098039;0.521568627450980,0.521568627450980,0.513202614379085;0.525490196078431,0.525490196078431,0.509542483660131;0.529411764705882,0.529411764705882,0.505882352941176;0.533333333333333,0.533333333333333,0.502222222222222;0.537254901960784,0.537254901960784,0.498562091503268;0.541176470588235,0.541176470588235,0.494901960784314;0.545098039215686,0.545098039215686,0.491241830065360;0.549019607843137,0.549019607843137,0.487581699346405;0.552941176470588,0.552941176470588,0.483921568627451;0.556862745098039,0.556862745098039,0.480261437908497;0.560784313725490,0.560784313725490,0.476601307189543;0.564705882352941,0.564705882352941,0.472941176470588;0.568627450980392,0.568627450980392,0.469281045751634;0.572549019607843,0.572549019607843,0.465620915032680;0.576470588235294,0.576470588235294,0.461960784313726;0.580392156862745,0.580392156862745,0.458300653594771;0.584313725490196,0.584313725490196,0.454640522875817;0.588235294117647,0.588235294117647,0.450980392156863;0.592156862745098,0.592156862745098,0.447320261437909;0.596078431372549,0.596078431372549,0.443660130718954;0.600000000000000,0.600000000000000,0.440000000000000;0.603921568627451,0.603921568627451,0.436339869281046;0.607843137254902,0.607843137254902,0.432679738562092;0.611764705882353,0.611764705882353,0.429019607843137;0.615686274509804,0.615686274509804,0.425359477124183;0.619607843137255,0.619607843137255,0.421699346405229;0.623529411764706,0.623529411764706,0.418039215686274;0.627450980392157,0.627450980392157,0.414379084967320;0.631372549019608,0.631372549019608,0.410718954248366;0.635294117647059,0.635294117647059,0.407058823529412;0.639215686274510,0.639215686274510,0.403398692810458;0.643137254901961,0.643137254901961,0.399738562091503;0.647058823529412,0.647058823529412,0.396078431372549;0.650980392156863,0.650980392156863,0.392418300653595;0.654901960784314,0.654901960784314,0.388758169934641;0.658823529411765,0.658823529411765,0.385098039215686;0.662745098039216,0.662745098039216,0.381437908496732;0.666666666666667,0.666666666666667,0.377777777777778;0.670588235294118,0.670588235294118,0.374117647058824;0.674509803921569,0.674509803921569,0.370457516339869;0.678431372549020,0.678431372549020,0.366797385620915;0.682352941176471,0.682352941176471,0.363137254901961;0.686274509803922,0.686274509803922,0.359477124183007;0.690196078431373,0.690196078431373,0.355816993464052;0.694117647058824,0.694117647058824,0.352156862745098;0.698039215686275,0.698039215686275,0.348496732026144;0.701960784313725,0.701960784313725,0.344836601307190;0.705882352941177,0.705882352941177,0.341176470588235;0.709803921568628,0.709803921568628,0.337516339869281;0.713725490196078,0.713725490196078,0.333856209150327;0.717647058823529,0.717647058823529,0.330196078431373;0.721568627450980,0.721568627450980,0.326535947712418;0.725490196078431,0.725490196078431,0.322875816993464;0.729411764705882,0.729411764705882,0.319215686274510;0.733333333333333,0.733333333333333,0.315555555555556;0.737254901960784,0.737254901960784,0.311895424836601;0.741176470588235,0.741176470588235,0.308235294117647;0.745098039215686,0.745098039215686,0.304575163398693;0.749019607843137,0.749019607843137,0.300915032679739;0.752941176470588,0.752941176470588,0.297254901960784;0.756862745098039,0.756862745098039,0.293594771241830;0.760784313725490,0.760784313725490,0.289934640522876;0.764705882352941,0.764705882352941,0.286274509803922;0.768627450980392,0.768627450980392,0.282614379084967;0.772549019607843,0.772549019607843,0.278954248366013;0.776470588235294,0.776470588235294,0.275294117647059;0.780392156862745,0.780392156862745,0.271633986928105;0.784313725490196,0.784313725490196,0.267973856209150;0.788235294117647,0.788235294117647,0.264313725490196;0.792156862745098,0.792156862745098,0.260653594771242;0.796078431372549,0.796078431372549,0.256993464052288;0.800000000000000,0.800000000000000,0.253333333333333;0.803921568627451,0.803921568627451,0.249673202614379;0.807843137254902,0.807843137254902,0.246013071895425;0.811764705882353,0.811764705882353,0.242352941176471;0.815686274509804,0.815686274509804,0.238692810457516;0.819607843137255,0.819607843137255,0.235032679738562;0.823529411764706,0.823529411764706,0.231372549019608;0.827450980392157,0.827450980392157,0.227712418300654;0.831372549019608,0.831372549019608,0.224052287581699;0.835294117647059,0.835294117647059,0.220392156862745;0.839215686274510,0.839215686274510,0.216732026143791;0.843137254901961,0.843137254901961,0.213071895424837;0.847058823529412,0.847058823529412,0.209411764705882;0.850980392156863,0.850980392156863,0.205751633986928;0.854901960784314,0.854901960784314,0.202091503267974;0.858823529411765,0.858823529411765,0.198431372549020;0.862745098039216,0.862745098039216,0.194771241830065;0.866666666666667,0.866666666666667,0.191111111111111;0.870588235294118,0.870588235294118,0.187450980392157;0.874509803921569,0.874509803921569,0.183790849673203;0.878431372549020,0.878431372549020,0.180130718954248;0.882352941176471,0.882352941176471,0.176470588235294;0.886274509803922,0.886274509803922,0.172810457516340;0.890196078431373,0.890196078431373,0.169150326797386;0.894117647058824,0.894117647058824,0.165490196078431;0.898039215686275,0.898039215686275,0.161830065359477;0.901960784313726,0.901960784313726,0.158169934640523;0.905882352941177,0.905882352941177,0.154509803921569;0.909803921568627,0.909803921568627,0.150849673202614;0.913725490196078,0.913725490196078,0.147189542483660;0.917647058823529,0.917647058823529,0.143529411764706;0.921568627450980,0.921568627450980,0.139869281045752;0.925490196078431,0.925490196078431,0.136209150326797;0.929411764705882,0.929411764705882,0.132549019607843;0.933333333333333,0.933333333333333,0.128888888888889;0.937254901960784,0.937254901960784,0.125228758169935;0.941176470588235,0.941176470588235,0.121568627450980;0.945098039215686,0.945098039215686,0.117908496732026;0.949019607843137,0.949019607843137,0.114248366013072;0.952941176470588,0.952941176470588,0.110588235294118;0.956862745098039,0.956862745098039,0.106928104575163;0.960784313725490,0.960784313725490,0.103267973856209;0.964705882352941,0.964705882352941,0.0996078431372549;0.968627450980392,0.968627450980392,0.0959477124183007;0.972549019607843,0.972549019607843,0.0922875816993464;0.976470588235294,0.976470588235294,0.0886274509803922;0.980392156862745,0.980392156862745,0.0849673202614379;0.984313725490196,0.984313725490196,0.0813071895424837;0.988235294117647,0.988235294117647,0.0776470588235294;0.992156862745098,0.992156862745098,0.0739869281045751;0.996078431372549,0.996078431372549,0.0703267973856209;1,1,0.0666666666666667];
    colorNum=size(mycolorMap,1);
    img=zeros(m,n,3);
    for i=1:m
        for j=1:n
            val=resizeCam(i,j);
            idx=min(floor(val*colorNum)+1,colorNum);
            for k=1:3
               img(i,j,k)=mycolorMap(idx,k);
            end
        end
    end
end



